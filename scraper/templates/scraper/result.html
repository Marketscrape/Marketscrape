{% extends 'scraper/base.html' %}
{% load static %}

{% block content %}
    <!-- This script can't be extracted to it's own JavaScript file -->
    <script>
        var item = {
            image: "{{ image }}",
            title: "{{ title }}",
            rating: "{{ price_rating }}",
            price: "{{ list_price }}"
        };
        var shortened_url = "{{ shortened_url }}";
        localStorage.setItem(shortened_url, JSON.stringify(item));
    </script>

    <a href="{% url 'index' %}" class="btn btn-outline-secondary mt-3 mx-3"><i class="fas fa-chevron-left"></i> Go Back</a>
    <div class="container md mt-5">
        <h1 class="text-center mb-4">Analysis Report</h1>
        <p class="text-center lead">
            Dynamic reports delivering <span class="gradient-text">invaluable</span> insights, 
            <span class="gradient-text">powerful</span> data analytics, 
            and <span class="gradient-text">captivating</span> visualizations
        </p>
        <div class="card" style="margin-top: 5rem;">
            <div class="card-body">
                <h5 class="card-title">{{ title }} <span class="clickable" data-toggle="collapse" data-target="#infoCollapse"><i class="fas fa-info-circle" id="infoBtn"></i></span></h5>
                <div class="collapse" style="margin-bottom: 1rem;" id="infoCollapse">
                    Your bubble chart shows the prices of different product categories using colourful bubbles, where the size and height of the bubbles indicate the price of 
                    the product. The bubbles are colour-coded to show the most and least expensive categories, and you can hover over each bubble to get additional information.
                    It's an easy and playful way to explore your data!
                </div>
                <h6 class="card-subtitle mb-2 text-muted">Listed {{ days }} days and {{ hours }} hours ago, for ${{ list_price }}</h6>
                <div id="chart" data-chart="{{ chart }}"></div>
                <p>
                    Given the sheer variety of product names we encountered, we've taken the liberty of grouping our findings into {{ categories|length }} funky and fun categories based on the lengths of the names. 
                    This nifty approach allowed us to whip up some visually engaging graphics that are sure to tickle your fancy while providing valuable insights.
                </p>

                <p>
                    We found that the best deal occured in the <span style="color:#28a745">{{ best_similar_category }}</span> category 
                    with a price of <span style="color:#28a745">${{ best_similar_price }}</span> for the <a style="color:#28a745" href="{{ best_similar_url }}" target="_blank">{{ best_similar_description }}</a> product, 
                    {% if list_best_context.type == "decrease" %}
                        which is a <span style="color:#dc3545">{{ list_best_context.type }}</span> of <span style="color:#dc3545">{{ list_best_context.amount }}%</span>!
                    {% else %}
                        which is an <span style="color:#28a745">{{ list_best_context.type }}</span> of <span style="color:#28a745">{{ list_best_context.amount }}%</span>!
                    {% endif %}
                </p>
            </div>
        </div>
    </div>

    <script src="{% static 'plotSimilarResults.js' %}"></script>
{% endblock content %}
