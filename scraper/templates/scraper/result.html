{% extends 'scraper/base.html' %}
{% load static %}

{% block content %}
    <!-- This script can't be extracted to it's own JavaScript file -->
    <script>
        var item = {
            image: "{{ image }}",
            title: "{{ title }}",
            rating: "{{ price_rating }}",
            price: "{{ list_price }}"
        };
        var shortened_url = "{{ shortened_url }}";
        localStorage.setItem(shortened_url, JSON.stringify(item));
    </script>

    <div class="alert alert-info alert-dismissible" id="infoAlert" style="display:none;">
        <span aria-hidden="true"><i class="fas fa-solid fa-times" id="closeAlertBtn" style="cursor: pointer;"></i></span> A larger-sized bubble corresponds to a higher price and, subsequently, a redder colour! The opposite is also true; in summary, remember this little visual: üî¥‚ùå and üü¢‚úîÔ∏è! 
    </div>

    <a href="{% url 'index' %}" class="btn btn-outline-secondary mt-3 mx-3"><i class="fas fa-chevron-left"></i> Go Back</a>
    <div class="container md mt-5">
        <h1 class="text-center mb-4">Analysis Report</h1>
        <p class="text-center lead">
            Dynamic reports delivering <span class="gradient-text">invaluable</span> insights, 
            <span class="gradient-text">powerful</span> data analytics, 
            and <span class="gradient-text">captivating</span> visualizations
        </p>
        <div class="card" style="margin-top: 5rem;">
            <div class="card-body">
                <h5 class="card-title">{{ title }} <span class="clickable"><i class="fas fa-info-circle" id="infoBtn"></i></span></h5>
                <h6 class="card-subtitle mb-2 text-muted">Listed {{ days }} days and {{ hours }} hours ago, for ${{ list_price }}</h6>
                <div id="chart" data-chart="{{ chart }}"></div>
                <p>
                    Given the sheer variety of product names we encountered, we've taken the liberty of grouping our findings into {{ categories|length }} funky and fun categories based on the lengths of the names. 
                    This nifty approach allowed us to whip up some visually engaging graphics that are sure to tickle your fancy while providing valuable insights.
                </p>

                <p>
                    We found that the best deal occured in the <span style="color:#28a745">{{ best_similar_category }}</span> category 
                    with a price of <span style="color:#28a745">${{ best_similar_price }}</span> for the <span style="color:#28a745">{{ best_similar_description }}</span>!
                </p>
            </div>
        </div>
    </div>

    <script src="{% static 'infoButtonAlert.js' %}"></script>
    <script src="{% static 'plotSimilarResults.js' %}"></script>
{% endblock content %}
